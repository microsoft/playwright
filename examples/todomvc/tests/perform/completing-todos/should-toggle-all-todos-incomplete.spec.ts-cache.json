{
  "Add three todos: 'Task 1', 'Task 2', 'Task 3' and mark all as complete using the toggle all checkbox": {
    "actions": [
      {
        "method": "fill",
        "selector": "internal:role=textbox[name=\"What needs to be done?\"i]",
        "text": "Task 1",
        "submit": true,
        "code": "await page.getByRole('textbox', { name: 'What needs to be done?' }).fill('Task 1');\nawait page.keyboard.press('Enter');"
      },
      {
        "method": "fill",
        "selector": "internal:role=textbox[name=\"What needs to be done?\"i]",
        "text": "Task 2",
        "submit": true,
        "code": "await page.getByRole('textbox', { name: 'What needs to be done?' }).fill('Task 2');\nawait page.keyboard.press('Enter');"
      },
      {
        "method": "fill",
        "selector": "internal:role=textbox[name=\"What needs to be done?\"i]",
        "text": "Task 3",
        "submit": true,
        "code": "await page.getByRole('textbox', { name: 'What needs to be done?' }).fill('Task 3');\nawait page.keyboard.press('Enter');"
      },
      {
        "method": "setChecked",
        "selector": "internal:role=checkbox[name=\"❯Mark all as complete\"i]",
        "checked": true,
        "code": "await page.getByRole('checkbox', { name: '❯Mark all as complete' }).check();"
      }
    ]
  },
  "All checkboxes are unchecked": {
    "actions": [
      {
        "method": "expectValue",
        "selector": "internal:role=listitem >> internal:has-text=\"Task 1\"i >> internal:label=\"Toggle Todo\"i",
        "type": "checkbox",
        "value": "false",
        "code": "await expect(page.getByRole('listitem').filter({ hasText: 'Task 1' }).getByLabel('Toggle Todo')).toBeChecked({ checked: false });"
      },
      {
        "method": "expectValue",
        "selector": "internal:role=listitem >> internal:has-text=\"Task 2\"i >> internal:label=\"Toggle Todo\"i",
        "type": "checkbox",
        "value": "false",
        "code": "await expect(page.getByRole('listitem').filter({ hasText: 'Task 2' }).getByLabel('Toggle Todo')).toBeChecked({ checked: false });"
      },
      {
        "method": "expectValue",
        "selector": "internal:role=listitem >> internal:has-text=\"Task 3\"i >> internal:label=\"Toggle Todo\"i",
        "type": "checkbox",
        "value": "false",
        "code": "await expect(page.getByRole('listitem').filter({ hasText: 'Task 3' }).getByLabel('Toggle Todo')).toBeChecked({ checked: false });"
      }
    ]
  },
  "All todos are marked as active": {
    "actions": [
      {
        "method": "expectValue",
        "selector": "internal:role=listitem >> internal:has-text=\"Task 1\"i >> internal:label=\"Toggle Todo\"i",
        "type": "checkbox",
        "value": "false",
        "isNot": false,
        "code": "await expect(page.getByRole('listitem').filter({ hasText: 'Task 1' }).getByLabel('Toggle Todo')).toBeChecked({ checked: false });"
      }
    ]
  },
  "All todos are marked as complete": {
    "actions": [
      {
        "method": "expectValue",
        "selector": "internal:role=listitem >> internal:has-text=\"Task 1\"i >> internal:label=\"Toggle Todo\"i",
        "type": "checkbox",
        "value": "true",
        "code": "await expect(page.getByRole('listitem').filter({ hasText: 'Task 1' }).getByLabel('Toggle Todo')).toBeChecked({ checked: true });"
      },
      {
        "method": "expectValue",
        "selector": "internal:role=listitem >> internal:has-text=\"Task 2\"i >> internal:label=\"Toggle Todo\"i",
        "type": "checkbox",
        "value": "true",
        "code": "await expect(page.getByRole('listitem').filter({ hasText: 'Task 2' }).getByLabel('Toggle Todo')).toBeChecked({ checked: true });"
      },
      {
        "method": "expectValue",
        "selector": "internal:role=listitem >> internal:has-text=\"Task 3\"i >> internal:label=\"Toggle Todo\"i",
        "type": "checkbox",
        "value": "true",
        "code": "await expect(page.getByRole('listitem').filter({ hasText: 'Task 3' }).getByLabel('Toggle Todo')).toBeChecked({ checked: true });"
      }
    ]
  },
  "Click the 'Mark all as complete' checkbox again": {
    "actions": [
      {
        "method": "click",
        "selector": "internal:role=checkbox[name=\"❯Mark all as complete\"i]",
        "code": "await page.getByRole('checkbox', { name: '❯Mark all as complete' }).click();"
      }
    ]
  },
  "Counter shows '0 items left'": {
    "actions": [
      {
        "method": "expectVisible",
        "selector": "internal:text=\"0 items left\"i",
        "code": "await expect(page.getByText('0 items left')).toBeVisible();"
      }
    ]
  },
  "Counter shows '3 items left'": {
    "actions": [
      {
        "method": "expectVisible",
        "selector": "internal:text=\"3 items left\"i",
        "code": "await expect(page.getByText('3 items left')).toBeVisible();"
      }
    ]
  },
  "The 'Clear completed' button disappears": {
    "actions": [
      {
        "method": "expectVisible",
        "selector": "internal:role=button[name=\"Clear completed\"i]",
        "isNot": true,
        "code": "await expect(page.getByRole('button', { name: 'Clear completed' })).not.toBeVisible();"
      }
    ]
  },
  "The page loads with an empty todo list": {
    "actions": [
      {
        "method": "expectVisible",
        "selector": "internal:role=textbox[name=\"What needs to be done?\"i]",
        "code": "await expect(page.getByRole('textbox', { name: 'What needs to be done?' })).toBeVisible();"
      }
    ]
  }
}